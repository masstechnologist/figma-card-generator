<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/thomas-lowry/figma-plugin-ds/dist/figma-plugin-ds.css">
<style>
  body {
      padding: 2em;
  }
  div {
      margin: 1em;
  }
  input {
      display: block;
  }
</style>

<h1>Card Generator Plugin</h1>
<div>
  <div class="input">
    <label for="username" class="label">Username:</label>
    <input type="text" id="username" class="input__field" value="Username">
  </div>
  <div class="input">
    <label for="name" class="label">Name:</label>
    <input type="text" id="name" class="input__field" value="Name">
  </div>
  <div class="input">
    <label for="description" class="label">Description:</label>
    <input type="textarea" id="description" class="input__field" value="Description">
  </div>

  <div class="switch">
    <input id="dark-mode-on" class="switch__toggle" type="checkbox">
    <label class="switch__label" for="dark-mode-on">Dark mode</label>
  </div>

  <div class="radio">
    <input id="radioButton1" type="radio" class="radio__button" value="0" name="variantGroup">
    <label for="radioButton1" class="radio__label">No Image</label>

    <input id="radioButton2" type="radio" class="radio__button" value="1" name="variantGroup" checked>
    <label for="radioButton2" class="radio__label">Single Image</label>

    <input id="radioButton3" type="radio" class="radio__button" value="2" name="variantGroup">
    <label for="radioButton3" class="radio__label">Carousel</label>
  </div>

  <div>
    <button class="button button--primary" id="submit-post">Submit</button>
</div>
</div>
<script>
  document.getElementById('submit-post').onclick = () => {
    console.log('clicked');
    const username = document.getElementById('username').value;
    const name = document.getElementById('name').value;
    const description = document.getElementById('description').value;
    const darkModeState = document.getElementById('dark-mode-on').checked;
    const imageVariant = document.querySelector('input[name="variantGroup"]:checked').value;
    parent.postMessage({ pluginMessage: { type: 'create-card', username, name, description, darkModeState, imageVariant } }, '*')
  }
</script>